# Kafka configuration for learning environment
# Bitnami Kafka Helm chart values

kafka:
  # Use latest available image
  image:
    registry: docker.io
    repository: bitnami/kafka
    tag: latest

  # Single replica for dev/learning
  controller:
    replicaCount: 1
    resources:
      requests:
        cpu: 250m
        memory: 512Mi
      limits:
        cpu: 500m
        memory: 1Gi
    persistence:
      enabled: true
      size: 8Gi

  # Broker settings (KRaft mode - no ZooKeeper needed)
  broker:
    replicaCount: 0  # Using combined mode

  # Listeners
  listeners:
    client:
      protocol: PLAINTEXT
      containerPort: 9092
    controller:
      protocol: PLAINTEXT
    interbroker:
      protocol: PLAINTEXT

  # Service - LoadBalancer for external access
  service:
    type: LoadBalancer
    ports:
      client: 9092

  # Metrics for Prometheus
  metrics:
    kafka:
      enabled: true
    jmx:
      enabled: false

  # Settings
  logRetentionHours: 168
  autoCreateTopicsEnable: true

  podAnnotations:
    gitops-managed: "true"

# Kafka UI configuration
kafka-ui:
  envs:
    config:
      KAFKA_CLUSTERS_0_NAME: local
      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka:9092

  service:
    type: LoadBalancer
    port: 80
